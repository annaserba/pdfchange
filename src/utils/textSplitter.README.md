# –§—É–Ω–∫—Ü–∏—è —É–º–Ω–æ–≥–æ —Ä–∞–∑–±–∏–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–æ–∫–∏

## üìã –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å `textSplitter.ts` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ —Å —É—á–µ—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —à–∏—Ä–∏–Ω—ã –∏ –ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–ª—è —É–∫—Ä–∞–∏–Ω—Å–∫–∏—Ö –∫–≤–∏—Ç–∞–Ω—Ü–∏–π.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### `splitTextIntoBlocks()`
–†–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ –±–ª–æ–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å—Ç—Ä–æ–∫.

```typescript
const blocks = splitTextIntoBlocks(
  "–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è",
  50,  // startX
  300, // startY
  45,  // maxCharsFirstLine
  12   // lineHeight
);
```

### `splitLabelAndValue()`
–†–∞–∑–±–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –∑–Ω–∞—á–µ–Ω–∏–µ —Å —É—á–µ—Ç–æ–º –ø–µ—Ä–µ–Ω–æ—Å–∞.

```typescript
const blocks = splitLabelAndValue(
  "–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É:",
  "–î–ª–∏–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ...",
  50, 300, 45, 12
);
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç (‚â§45 —Å–∏–º–≤–æ–ª–æ–≤)
```
–í—Ö–æ–¥–Ω–æ–π: "2150.00 –≥—Ä–Ω" (11 —Å–∏–º–≤–æ–ª–æ–≤)
–†–µ–∑—É–ª—å—Ç–∞—Ç: 1 —Å—Ç—Ä–æ–∫–∞
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚òÖ 2150.00 –≥—Ä–Ω                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‚úÖ –î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (>45 —Å–∏–º–≤–æ–ª–æ–≤)
```
–í—Ö–æ–¥–Ω–æ–π: "–û–ø–ª–∞—Ç–∞ –∑–∞ –Ω–∞–¥–∞–Ω—ñ –ø–æ—Å–ª—É–≥–∏ –∑–≥—ñ–¥–Ω–æ –¥–æ–≥–æ–≤–æ—Ä—É ‚Ññ123..." (105 —Å–∏–º–≤–æ–ª–æ–≤)
–†–µ–∑—É–ª—å—Ç–∞—Ç: 2 —Å—Ç—Ä–æ–∫–∏
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚òÖ –û–ø–ª–∞—Ç–∞ –∑–∞ –Ω–∞–¥–∞–Ω—ñ –ø–æ—Å–ª—É–≥–∏ –∑–≥—ñ–¥–Ω–æ...   ‚îÇ
‚îÇ   –≤—ñ–¥ 15.09.2025 –∑–∞ –ø–µ—Ä—ñ–æ–¥ –∑...        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‚úÖ –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–µ —Å–ª–æ–≤–æ
```
–í—Ö–æ–¥–Ω–æ–π: "UA213223130000026007233566778899..." (50 —Å–∏–º–≤–æ–ª–æ–≤)
–†–µ–∑—É–ª—å—Ç–∞—Ç: 2 —Å—Ç—Ä–æ–∫–∏ (—Å–ª–æ–≤–æ —Ä–∞–∑–±–∏—Ç–æ)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚òÖ UA2132231300000260072335667788990... ‚îÇ
‚îÇ   67788                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìê –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã**
- –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç ‚â§ `maxCharsFirstLine` ‚Üí –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞
- –ò–Ω–∞—á–µ ‚Üí —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫

### 2. **–†–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ —Å–ª–æ–≤–∞–º**
- –¢–µ–∫—Å—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –ø–æ –ø—Ä–æ–±–µ–ª–∞–º: `/\s+/`
- –°–ª–æ–≤–∞ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫–∏ –ø–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤**
- –°–ª–æ–≤–∞ –¥–ª–∏–Ω–Ω–µ–µ `maxCharsFirstLine` —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
- –ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å: –¥–æ `maxCharsFirstLine` —Å–∏–º–≤–æ–ª–æ–≤
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏: –¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤

### 4. **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: `(startX, startY)`
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ: `(startX, startY - lineHeight * n)`
- –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `maxCharsFirstLine` | 45 | –ú–∞–∫—Å–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ |
| `lineHeight` | 12 | –í—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö |
| –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ | 60 | –ú–∞–∫—Å–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –≤ –æ–±—ã—á–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö |

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤

- ‚úÖ **–ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç**: 1 —Å—Ç—Ä–æ–∫–∞ (–æ–∂–∏–¥–∞–ª–æ—Å—å: 1)
- ‚úÖ **–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç**: 2 —Å—Ç—Ä–æ–∫–∏ (–æ–∂–∏–¥–∞–ª–æ—Å—å: 2-3)
- ‚úÖ **–î–ª–∏–Ω–Ω–æ–µ —Å–ª–æ–≤–æ**: 2 —Å—Ç—Ä–æ–∫–∏ —Å —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º (–æ–∂–∏–¥–∞–ª–æ—Å—å: 2)
- ‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ
- ‚úÖ **–†–∞–∑–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ PDF –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä

–§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `PDFGenerator.ts`:

```typescript
if (newValue.length > 45) {
  const textBlocks = splitLabelAndValue('', newValue, x, y, 45, 12);
  
  textBlocks.forEach((block) => {
    drawUkrainianText(page, block.text, {
      x: block.x,
      y: block.y,
      size: 10,
      color: rgb(0, 0, 0)
    }, font);
  });
}
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 1. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞**
```typescript
// –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
const maxChars = isFirstLine ? 45 : 60;

// –£–ª—É—á—à–µ–Ω–∏–µ: –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à—Ä–∏—Ñ—Ç–∞
const maxChars = calculateMaxChars(fontSize, availableWidth);
```

### 2. **–£–º–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã**
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–ª—è —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
const hyphenationRules = {
  '–¥–æ–≥–æ–≤–æ—Ä—É': '–¥–æ–≥–æ-–≤–æ—Ä—É',
  '–ø–ª–∞—Ç–µ–∂—É': '–ø–ª–∞-—Ç–µ–∂—É'
};
```

### 3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ**
```typescript
// –†–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π
const fieldRules = {
  paymentPurpose: { maxChars: 50, allowHyphenation: true },
  accountNumber: { maxChars: 40, splitByChunks: true },
  amount: { maxChars: 20, noSplit: true }
};
```

## üîç –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```javascript
// –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
node test-text-splitter.js

// –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
console.log(visualizeBlocks(blocks, '–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ—Å—Ç–∞'));
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ö–æ—Ä–æ—Ç–∫–æ–µ –ø–æ–ª–µ
```typescript
const blocks = splitLabelAndValue("–°—É–º–∞:", "2150.00 –≥—Ä–Ω", 50, 300);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: 1 —Å—Ç—Ä–æ–∫–∞ "–°—É–º–∞: 2150.00 –≥—Ä–Ω"
```

### –ü—Ä–∏–º–µ—Ä 2: –î–ª–∏–Ω–Ω–æ–µ –ø–æ–ª–µ
```typescript
const blocks = splitLabelAndValue(
  "–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É:",
  "–û–ø–ª–∞—Ç–∞ –∑–∞ –Ω–∞–¥–∞–Ω—ñ –ø–æ—Å–ª—É–≥–∏ –∑–≥—ñ–¥–Ω–æ –¥–æ–≥–æ–≤–æ—Ä—É ‚Ññ123...",
  50, 300
);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: 
// –°—Ç—Ä–æ–∫–∞ 1: "–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É:"
// –°—Ç—Ä–æ–∫–∞ 2: "–û–ø–ª–∞—Ç–∞ –∑–∞ –Ω–∞–¥–∞–Ω—ñ –ø–æ—Å–ª—É–≥–∏ –∑–≥—ñ–¥–Ω–æ –¥–æ–≥–æ–≤–æ—Ä—É ‚Ññ123"
// –°—Ç—Ä–æ–∫–∞ 3: "–≤—ñ–¥ 15.09.2025..."
```

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–±–∏–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —É—Å–ø–µ—à–Ω–æ:
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã
- ‚úÖ –†–∞–∑–±–∏–≤–∞–µ—Ç —Å–≤–µ—Ä—Ö–¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –±–ª–æ–∫–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ PDF –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∞ —Ç–µ—Å—Ç–∞–º–∏

**–ì–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üéâ
